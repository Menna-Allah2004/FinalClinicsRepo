@using Microsoft.AspNetCore.Identity
@using MedicalConnect.Database

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    var controller = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["Action"]?.ToString() ?? "";

    bool IsActive(string controllerName, string actionName) =>
        controller == controllerName && currentAction == actionName;
}

<aside id="sidebar" class="sidebar">
    <div class="d-flex justify-content-center align-items-center mb-4 pt-3">
        <h3 id="sidebar-brand" class="text-white fw-bold fs-4">ميديكال كونكت</h3>
        <h3 id="sidebar-brand-collapsed" class="text-white fw-bold fs-4 d-none">ط</h3>
    </div>
    <button id="toggle-sidebar" class="toggle-sidebar-btn">
        <i class="fas fa-chevron-right"></i>
    </button>
    <nav>
        <ul class="sidebar-menu p-0">
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Dashboard" ? "active" : "")">
                <a asp-controller="Doctors" asp-action="Dashboard">
                    <i class="fas fa-home"></i>
                    <span class="sidebar-link-text">الرئيسية</span>
                </a>
            </li>
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Appointments" ? "active" : "")">
                <a asp-controller="Doctors" asp-action="Appointments">
                    <i class="fas fa-calendar-alt"></i>
                    <span class="sidebar-link-text">المواعيد</span>
                </a>
            </li>
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Patients" ? "active" : "")">
                <a asp-controller="Doctors" asp-action="Patients">
                    <i class="fas fa-users"></i>
                    <span class="sidebar-link-text">المرضى</span>
                </a>
            </li>
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Reports" ? "active" : "")">
                <a asp-controller="Doctors" asp-action="Reports">
                    <i class="fas fa-file-alt"></i>
                    <span class="sidebar-link-text">التقارير</span>
                </a>
            </li>
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Settings" ? "active" : "")">
                <a asp-controller="Doctors" asp-action="Settings">
                    <i class="fas fa-cog"></i>
                    <span class="sidebar-link-text">الإعدادات</span>
                </a>
            </li>
            <li class="sidebar-menu-item @(ViewContext.RouteData.Values["Action"].ToString() == "Index" ? "active" : "")">
                <a asp-controller="Home" asp-action="Index">
                    <i class="fas fa-globe"></i>
                    <span class="sidebar-link-text">عرض الموقع</span>
                </a>
            </li>
            <li class="sidebar-menu-item mt-auto logout-item">
                <form asp-controller="Account" asp-action="Logout" method="post" id="logoutForm">
                    <a href="javascript:document.getElementById('logoutForm').submit()" class="text-danger">
                        <i class="fas fa-sign-out-alt"></i>
                        <span class="sidebar-link-text">تسجيل الخروج</span>
                    </a>
                </form>
            </li>
        </ul>
    </nav>
</aside>